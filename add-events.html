<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π</title>
</head>
<body>
    <h1>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π...</h1>
    <div id="status"></div>

    <script>
        const events = [
            {
                title: "Off-line –∑–∞–≤—Ç—Ä–∞–∫ –≤ –ú–∞–ª—ã—Ö –ö–æ—Ä–µ–ª–∞—Ö",
                date: "2025-11-03",
                time: "10:00",
                description: "–£—é—Ç–Ω—ã–π –∑–∞–≤—Ç—Ä–∞–∫ –Ω–∞ —Å–≤–µ–∂–µ–º –≤–æ–∑–¥—É—Ö–µ –≤ –º—É–∑–µ–µ –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–≥–æ –∑–æ–¥—á–µ—Å—Ç–≤–∞",
                type: "offline",
                location: "–ú–∞–ª—ã–µ –ö–æ—Ä–µ–ª—ã",
                seats: 20,
                is_paid: false,
                speakers: []
            },
            {
                title: "–ü–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ ‚Äî —Å–µ—Å—Å–∏—è —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º",
                date: "2025-12-12",
                time: "18:00",
                description: "–†–µ—Ñ–ª–µ–∫—Å–∏—è –∏ –ø–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ –≥–æ–¥–∞ –≤–º–µ—Å—Ç–µ —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º",
                type: "offline",
                location: "–ö–ª—É–± MUSE",
                seats: 15,
                is_paid: false,
                speakers: [
                    {
                        name: "–õ–∞–∑–∞—Ä–µ–≤–∞ –ú–∞—Ä–∏—è",
                        role: "–ü—Å–∏—Ö–æ–ª–æ–≥",
                        image: ""
                    }
                ]
            },
            {
                title: "–ö–∞–∫ –Ω–∞–π—Ç–∏ —Å–≤–æ–π —Å—Ç–∏–ª—å –∏ –≤–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π –≥–∞—Ä–¥–µ—Ä–æ–±",
                date: "2025-11-28",
                time: "18:00",
                description: "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ–≥–æ –∏ —Å—Ç–∏–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞",
                type: "offline",
                location: "–ö–ª—É–± MUSE",
                seats: 20,
                is_paid: false,
                speakers: [
                    {
                        name: "–Æ–ª–∏—è –°–∞–º—Å–æ–Ω–æ–≤–∞",
                        role: "–°—Ç–∏–ª–∏—Å—Ç",
                        image: ""
                    }
                ]
            },
            {
                title: "Off-line —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π —É—Ä–æ–∫ —Ä–∏—Å–æ–≤–∞–Ω–∏—è",
                date: "2025-11-15",
                time: "18:00",
                description: "–†–∞—Å–∫—Ä–æ–π—Ç–µ —Å–≤–æ–π —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å–µ –ø–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—é",
                type: "offline",
                location: "–ö–ª—É–± MUSE",
                seats: 15,
                is_paid: false,
                speakers: [
                    {
                        name: "–õ—é–¥–º–∏–ª–∞ –ú–µ—Ä–∑–ª–∞—è",
                        role: "–•—É–¥–æ–∂–Ω–∏–∫",
                        image: ""
                    }
                ]
            },
            {
                title: "–í—Å—Ç—Ä–µ—á–∞ —Å –ï–∫–∞—Ç–µ—Ä–∏–Ω–æ–π –ö—É–∑–Ω–µ—Ü–æ–≤–æ–π",
                date: "2025-12-26",
                time: "18:00",
                description: "–í–µ—á–µ—Ä –æ–±—â–µ–Ω–∏—è –∏ –æ–±–º–µ–Ω–∞ –æ–ø—ã—Ç–æ–º",
                type: "offline",
                location: "–ö–ª—É–± MUSE",
                seats: 20,
                is_paid: false,
                speakers: [
                    {
                        name: "–ö—É–∑–Ω–µ—Ü–æ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞",
                        role: "–°–ø–∏–∫–µ—Ä",
                        image: ""
                    }
                ]
            }
        ];

        const statusDiv = document.getElementById('status');
        let completed = 0;

        async function addEvent(eventData) {
            try {
                const response = await fetch('https://functions.poehali.dev/9a03b227-0396-4821-b715-378637815ee2', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(eventData)
                });

                const result = await response.json();
                
                if (response.ok) {
                    completed++;
                    statusDiv.innerHTML += `<p style="color: green;">‚úÖ ${eventData.title} - –¥–æ–±–∞–≤–ª–µ–Ω–æ (${completed}/${events.length})</p>`;
                } else {
                    statusDiv.innerHTML += `<p style="color: red;">‚ùå ${eventData.title} - –æ—à–∏–±–∫–∞: ${result.error}</p>`;
                }
            } catch (error) {
                statusDiv.innerHTML += `<p style="color: red;">‚ùå ${eventData.title} - –æ—à–∏–±–∫–∞: ${error.message}</p>`;
            }
        }

        async function addAllEvents() {
            statusDiv.innerHTML = '<p>–ù–∞—á–∏–Ω–∞—é –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π...</p>';
            
            for (const event of events) {
                await addEvent(event);
                await new Promise(resolve => setTimeout(resolve, 500));
            }

            if (completed === events.length) {
                statusDiv.innerHTML += '<h2 style="color: green;">üéâ –í—Å–µ —Å–æ–±—ã—Ç–∏—è —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã!</h2>';
            } else {
                statusDiv.innerHTML += `<h2 style="color: orange;">‚ö†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–æ ${completed} –∏–∑ ${events.length} —Å–æ–±—ã—Ç–∏–π</h2>`;
            }
        }

        addAllEvents();
    </script>
</body>
</html>
